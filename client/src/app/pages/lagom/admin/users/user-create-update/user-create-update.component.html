<form (ngSubmit)="save()" [formGroup]="form">
    <div class="flex items-center" mat-dialog-title>
        <h2 *ngIf="form.controls.username.value" class="headline m-0 flex-auto">
            {{ form.controls.username.value }}
        </h2>
        <h2 *ngIf="!form.controls.username.value" class="headline m-0 flex-auto">
            New User
        </h2>
    </div>

    <mat-divider class="text-border"></mat-divider>

    <mat-dialog-content class="flex flex-col">
        <div *ngIf="this.isCreateMode()" class="flex flex-col sm:flex-row">
            <mat-form-field class="flex-auto">
                <mat-label>User</mat-label>
                <input cdkFocusInitial formControlName="username" aria-label="Username" matInput />
                <mat-icon matIconPrefix svgIcon="mat:person"></mat-icon>
            </mat-form-field>

            <div class="flex flex-col sm:flex-row">            
                <mat-form-field class="sm:ml-6 flex-auto">
                    <mat-label>New Password</mat-label>
                    <input
                      [type]="inputType"
                      formControlName="password"
                      aria-label="Password"
                      matInput
                      required />
                    <button
                      (click)="toggleVisibility()"
                      mat-icon-button
                      matIconSuffix
                      type="button">
                      <mat-icon *ngIf="visible" svgIcon="mat:visibility"></mat-icon>
                      <mat-icon *ngIf="!visible" svgIcon="mat:visibility_off"></mat-icon>
                    </button>                    
                    <mat-error *ngIf="form.controls.password?.hasError('required')"
                    >Specificare una Password
                    </mat-error>
                  </mat-form-field>
            </div>
        </div>

        <div *ngIf="this.isCreateMode()" class="flex flex-col sm:flex-row">
            <mat-form-field class="flex-auto">
                <mat-label>First Name</mat-label>
                <input formControlName="firstName" aria-label="First Name" matInput />
                <mat-icon matIconPrefix svgIcon="mat:person"></mat-icon>
            </mat-form-field>

            <mat-form-field class="sm:ml-6 flex-auto">
                <mat-label>Last Name</mat-label>
                <input formControlName="lastName" aria-label="Last Name" matInput />
                <mat-icon matIconPrefix svgIcon="mat:person"></mat-icon>
            </mat-form-field>
        </div>

        <div class="flex flex-col sm:flex-row">
            <mat-form-field class="flex-auto" appearance="outline">
                <mat-label>Claims</mat-label>
                <mat-select formControlName="claims" multiple [compareWith]="compareClaims">
                    <mat-option *ngFor="let claim of allClaims" [value]="claim">
                        {{ claim.name }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div *ngIf="this.isCreateMode()" class="sm:ml-6 flex-auto" appearance="outline">
            <mat-slide-toggle formControlName="isActive">Enabled</mat-slide-toggle>
        </div>
    </mat-dialog-content>

    <mat-dialog-actions align="end">
        <button mat-button mat-dialog-close type="button">Cancel</button>
        <button *ngIf="isCreateMode()" color="primary" mat-flat-button type="submit">Create User</button>
        <button *ngIf="isUpdateMode()" color="primary" mat-flat-button type="submit">Update User</button>
    </mat-dialog-actions>
</form>